<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>English Master Kids - è«§éŸ³è¼”åŠ©ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { 
            -webkit-touch-callout: none; 
            -webkit-user-select: none; 
            overscroll-behavior: none;
            font-family: 'system-ui', -apple-system, sans-serif;
        }
        .correct-anim { animation: pop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop { 0% { transform: scale(0.5); opacity: 0; } 60% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
        
        .pulse-ring { animation: pulse-ring 2s infinite; }
        @keyframes pulse-ring { 0% { box-shadow: 0 0 0 0 rgba(244, 63, 94, 0.4); } 70% { box-shadow: 0 0 0 15px rgba(244, 63, 94, 0); } 100% { box-shadow: 0 0 0 0 rgba(244, 63, 94, 0); } }

        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .mic-wave span {
            display: inline-block;
            width: 4px;
            height: 10px;
            background-color: white;
            border-radius: 2px;
            animation: wave 1s infinite ease-in-out;
            margin: 0 2px;
        }
        .mic-wave span:nth-child(1) { animation-delay: 0.1s; height: 15px; }
        .mic-wave span:nth-child(2) { animation-delay: 0.2s; height: 25px; }
        .mic-wave span:nth-child(3) { animation-delay: 0.3s; height: 15px; }
        @keyframes wave { 0%, 100% { transform: scaleY(1); } 50% { transform: scaleY(1.5); } }
        
        .backdrop-blur-sm { backdrop-filter: blur(4px); }
    </style>
</head>
<body class="bg-indigo-50 text-slate-800">

    <div id="app" class="min-h-screen flex flex-col items-center max-w-md mx-auto bg-white shadow-2xl min-h-screen relative overflow-hidden">
        <div class="flex items-center justify-center h-screen text-slate-400">
            ç³»çµ±è¼‰å…¥ä¸­...
        </div>
    </div>

    <script>
        // ==========================================
        //  å–®å­—è³‡æ–™åº« (Data Center)
        // ==========================================
        const RAW_WORD_DATA = {
            // Level 1: KK éŸ³æ¨™ - æ¯éŸ³ç¯‡ (åŠ ä¸Šæ³¨éŸ³/è«§éŸ³)
            level1: [
                { en: "[i]", zh: "ã„§ (é•·éŸ³)", ipa: "/i/", note: "å˜´è§’å‘å…©æ—æ‹‰é–‹å¾®ç¬‘ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šä¸€ (é•·éŸ³)</span>" },
                { en: "[Éª]", zh: "ã„§ (çŸ­éŸ³)", ipa: "/Éª/", note: "å˜´è§’æ”¾é¬†ï¼ŒçŸ­ä¿ƒç™¼éŸ³ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šä¸€ (çŸ­ä¿ƒ)</span>" },
                { en: "[e]", zh: "ã„ä¸€ (é›™æ¯éŸ³)", ipa: "/e/", note: "å…ˆå”¸ã„å†æ»‘å‘ä¸€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šã„ä¸€</span>" },
                { en: "[É›]", zh: "ã„ (çŸ­éŸ³)", ipa: "/É›/", note: "å˜´å·´å¾®å¼µï¼ŒçŸ­ä¿ƒæœ‰åŠ›ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šã„</span>" },
                { en: "[Ã¦]", zh: "è´è¶éŸ³", ipa: "/Ã¦/", note: "å˜´å·´å¼µå¤§æˆã€Œå•Šã€çš„å½¢ç‹€å”¸ã€Œã„ã€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ¢… (çš„éŸ»æ¯)</span>" },
                { en: "[É‘]", zh: "å•Š (å¤§å£)", ipa: "/É‘/", note: "å˜´å·´ä¸Šä¸‹æ‹‰å¤§ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå•Š (çœ‹ç‰™é†«æ™‚)</span>" },
                { en: "[ÊŒ]", zh: "å•Š (çŸ­éŸ³)", ipa: "/ÊŒ/", note: "å˜´å·´å¾®å¼µï¼ŒçŸ­ä¿ƒã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå•Š (çŸ­)</span>" },
                { en: "[É™]", zh: "ã„œ (è¼•éŸ³)", ipa: "/É™/", note: "å˜´å·´æ”¾é¬†ï¼Œè¼•è¼•å”¸ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šã„œ (è¼•è²)</span>" },
                { en: "[É”]", zh: "å–” (é•·éŸ³)", ipa: "/É”/", note: "å˜´å·´åœ“åœ“çš„ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå–”</span>" },
                { en: "[o]", zh: "æ­ (é›™æ¯éŸ³)", ipa: "/o/", note: "å…ˆå”¸å–”å†æ»‘å‘ã„¨ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ­</span>" },
                { en: "[u]", zh: "å—š (é•·éŸ³)", ipa: "/u/", note: "å˜´å”‡å˜Ÿåœ“ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå—š (é•·)</span>" },
                { en: "[ÊŠ]", zh: "å—š (çŸ­éŸ³)", ipa: "/ÊŠ/", note: "å˜´å·´æ”¾é¬†ä¸€é»ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå—š (çŸ­)</span>" },
                { en: "[É]", zh: "å„¿ (é•·éŸ³)", ipa: "/3/ or /É/", note: "æ²èˆŒéŸ³ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šäºŒ (æ²èˆŒ)</span>" },
                { en: "[Éš]", zh: "å„¿ (çŸ­éŸ³)", ipa: "/2/ or /Éš/", note: "è¼•è²æ²èˆŒã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šäºŒ (è¼•è²)</span>" },
                { en: "[aÉª]", zh: "ã„", ipa: "/aÉª/", note: "å•Š+ä¸€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ„›</span>" },
                { en: "[aÊŠ]", zh: "ã„ ", ipa: "/aÊŠ/", note: "å•Š+å—šã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¥§</span>" },
                { en: "[É”Éª]", zh: "ã„›ä¸€", ipa: "/É”Éª/", note: "å–”+ä¸€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå–”ä¸€</span>" }
            ],
            // Level 2: è¤‡åˆå­éŸ³ (åŠ ä¸Šè«§éŸ³)
            level2: [
                { en: "CH", zh: "CH ç™¼éŸ³", ipa: "/tÊƒ/", note: "æ°£éŸ³ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå» / åƒ</span>" },
                { en: "SH", zh: "SH ç™¼éŸ³", ipa: "/Êƒ/", note: "æ°£éŸ³ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå™“</span>" },
                { en: "TH", zh: "TH (ç„¡è²)", ipa: "/Î¸/", note: "å’¬èˆŒé ­å¹æ°£ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ–¯ (å¤§èˆŒé ­)</span>" },
                { en: "TH", zh: "TH (æœ‰è²)", ipa: "/Ã°/", note: "å’¬èˆŒé ­éœ‡å‹•ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ—¥ (å¤§èˆŒé ­)</span>" },
                { en: "PH", zh: "PH ç™¼éŸ³", ipa: "/f/", note: "å’¬ä¸‹å”‡ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¤«</span>" },
                { en: "WH", zh: "WH ç™¼éŸ³", ipa: "/w/", note: "åœ“å”‡ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šã„¨</span>" },
                { en: "NG", zh: "NG å­—å°¾éŸ³", ipa: "/Å‹/", note: "é¼»éŸ³ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå—¯ (Singçš„å°¾éŸ³)</span>" },
                { en: "CK", zh: "CK å­—å°¾éŸ³", ipa: "/k/", note: "çŸ­ä¿ƒã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå…‹</span>" },
                { en: "QU", zh: "QU ç™¼éŸ³", ipa: "/kw/", note: "åœ“å”‡å¼µé–‹ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¤¸</span>" },
                { en: "BL", zh: "BL æ··åˆéŸ³", ipa: "/bl/", note: "ç·Šé–‰é›™å”‡å¾Œå½ˆé–‹ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¸ƒé­¯</span>" },
                { en: "CL", zh: "CL æ··åˆéŸ³", ipa: "/kl/", note: "èˆŒæ ¹éŸ³ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå…‹é­¯</span>" },
                { en: "FL", zh: "FL æ··åˆéŸ³", ipa: "/fl/", note: "å’¬ä¸‹å”‡ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¤«é­¯</span>" },
                { en: "GL", zh: "GL æ··åˆéŸ³", ipa: "/gl/", note: "èˆŒæ ¹éŸ³ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šè‘›é­¯</span>" },
                { en: "PL", zh: "PL æ··åˆéŸ³", ipa: "/pl/", note: "ç·Šé–‰é›™å”‡ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ™®é­¯</span>" },
                { en: "SL", zh: "SL æ··åˆéŸ³", ipa: "/sl/", note: "æ°£éŸ³ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ–¯é­¯</span>" },
                { en: "BR", zh: "BR æ··åˆéŸ³", ipa: "/br/", note: "æ²èˆŒã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¸ƒè‹¥</span>" },
                { en: "CR", zh: "CR æ··åˆéŸ³", ipa: "/kr/", note: "æ²èˆŒã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå…‹è‹¥</span>" },
                { en: "DR", zh: "DR æ··åˆéŸ³", ipa: "/dr/", note: "æ²èˆŒã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæœ±è‹¥</span>" },
                { en: "FR", zh: "FR æ··åˆéŸ³", ipa: "/fr/", note: "å’¬ä¸‹å”‡æ²èˆŒã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¤«è‹¥</span>" },
                { en: "GR", zh: "GR æ··åˆéŸ³", ipa: "/gr/", note: "æ²èˆŒã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šè‘›è‹¥</span>" },
                { en: "PR", zh: "PR æ··åˆéŸ³", ipa: "/pr/", note: "æ²èˆŒã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ™®è‹¥</span>" },
                { en: "SP", zh: "SP æ··åˆéŸ³", ipa: "/sp/", note: "Så¾ŒPä¸é€æ°£ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ–¯é€¼</span>" },
                { en: "ST", zh: "ST æ··åˆéŸ³", ipa: "/st/", note: "Så¾ŒTä¸é€æ°£ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ–¯æ»´</span>" },
                { en: "SW", zh: "SW æ··åˆéŸ³", ipa: "/sw/", note: "åœ“å”‡ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ–¯æˆ‘</span>" },
                { en: "SCR", zh: "SCR æ··åˆéŸ³", ipa: "/skr/", note: "ä¸‰éŸ³é€£è®€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ–¯æ ¼è‹¥</span>" },
                { en: "SHR", zh: "SHR æ··åˆéŸ³", ipa: "/Êƒr/", note: "å™“+æ²èˆŒã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šè¨±è‹¥</span>" },
                { en: "SPL", zh: "SPL æ··åˆéŸ³", ipa: "/spl/", note: "ä¸‰éŸ³é€£è®€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ–¯å¸ƒé­¯</span>" },
                { en: "SPR", zh: "SPR æ··åˆéŸ³", ipa: "/spr/", note: "ä¸‰éŸ³é€£è®€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ–¯å¸ƒè‹¥</span>" },
                { en: "STR", zh: "STR æ··åˆéŸ³", ipa: "/str/", note: "ä¸‰éŸ³é€£è®€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ–¯æœ±è‹¥</span>" },
                { en: "THR", zh: "THR æ··åˆéŸ³", ipa: "/Î¸r/", note: "å’¬èˆŒ+æ²èˆŒã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ–¯è‹¥</span>" }
            ],
            // Level 3: åœ‹å°å–®å­—
            level3: [
                { en: "Book", zh: "æ›¸", ipa: "/bÊŠk/", note: "oo ç™¼çŸ­éŸ³ /ÊŠ/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¸ƒå¯</span>" }, 
                { en: "Pen", zh: "ç­†", ipa: "/pÉ›n/", note: "e ç™¼ /É›/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå™´</span>" },
                { en: "Cat", zh: "è²“", ipa: "/kÃ¦t/", note: "a ç™¼è´è¶éŸ³ /Ã¦/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå‡±ç‰¹</span>" },
                { en: "Dog", zh: "ç‹—", ipa: "/dÉ”g/", note: "o ç™¼ /É”/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé“æ ¼</span>" },
                { en: "Pig", zh: "è±¬", ipa: "/pÉªg/", note: "i ç™¼çŸ­éŸ³ /Éª/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå±æ ¼</span>" },
                { en: "Map", zh: "åœ°åœ–", ipa: "/mÃ¦p/", note: "a ç™¼ /Ã¦/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¦¹æ™®</span>" },
                { en: "Bus", zh: "å…¬è»Š", ipa: "/bÊŒs/", note: "u ç™¼ /ÊŒ/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šçˆ¸æ­»</span>" },
                { en: "Red", zh: "ç´…è‰²", ipa: "/rÉ›d/", note: "e ç™¼ /É›/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šç‘å¾·</span>" },
                { en: "Big", zh: "å¤§çš„", ipa: "/bÉªg/", note: "i ç™¼ /Éª/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¿…æ ¼</span>" },
                { en: "Box", zh: "ç®±å­", ipa: "/bÉ‘ks/", note: "o ç™¼ /É‘/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šéœ¸å…‹æ­»</span>" }
            ],
            // Level 4: åœ‹ä¸­å–®å­—
            level4: [ 
                { en: "Family", zh: "å®¶åº­", ipa: "/ËˆfÃ¦mÉ™li/", note: "a ç™¼ /Ã¦/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šééº¼é›¢</span>" }, 
                { en: "Friend", zh: "æœ‹å‹", ipa: "/frÉ›nd/", note: "ie ç™¼ /É›/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¤«ç‘æ©å¾·</span>" }, 
                { en: "School", zh: "å­¸æ ¡", ipa: "/skul/", note: "oo ç™¼é•·éŸ³ /u/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ­»å“­å–”</span>" },
                { en: "Doctor", zh: "é†«ç”Ÿ", ipa: "/ËˆdÉ‘ktÉ™r/", note: "o ç™¼ /É‘/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé”å…‹ç‰¹</span>" },
                { en: "Summer", zh: "å¤å¤©", ipa: "/ËˆsÊŒmÉ™r/", note: "u ç™¼ /ÊŒ/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šè–©éº¼</span>" },
                { en: "Winter", zh: "å†¬å¤©", ipa: "/ËˆwÉªntÉ™r/", note: "i ç™¼ /Éª/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæº«ç‰¹</span>" },
                { en: "Market", zh: "å¸‚å ´", ipa: "/ËˆmÉ‘rkÉªt/", note: "ar ç™¼ /É‘r/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šç½µã„ã„§t</span>" },
                { en: "Dinner", zh: "æ™šé¤", ipa: "/ËˆdÉªnÉ™r/", note: "i ç™¼ /Éª/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ»´å‘¢</span>" }
            ],
            // Level 5: é«˜ä¸€å–®å­—
            level5: [ 
                { en: "About", zh: "é—œæ–¼", ipa: "/É™ËˆbaÊŠt/", note: "ou ç™¼ /aÊŠ/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé¡-é®‘ç‰¹</span>" }, 
                { en: "Apple", zh: "è˜‹æœ", ipa: "/ËˆÃ¦pl/", note: "a ç™¼ /Ã¦/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šã„Ÿ-å‰–</span>" },
                { en: "Ability", zh: "èƒ½åŠ›", ipa: "/É™ËˆbÉªlÉ™ti/", note: "A ç™¼ /É™/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé¡-æ¯”-å‹’-æ¢¯</span>" },
                { en: "Accept", zh: "æ¥å—", ipa: "/É™kËˆsÉ›pt/", note: "cc ç™¼ /ks/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé¡-å…‹-ã„™ã„Ÿ-pt</span>" },
                { en: "Advice", zh: "å»ºè­°", ipa: "/É™dËˆvaÉªs/", note: "i ç™¼ /aÉª/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé¡d-v-ai-s</span>" },
                { en: "Create", zh: "å‰µé€ ", ipa: "/kriËˆeÉªt/", note: "ea åˆ†é–‹å”¸ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šk-ç‘-A-t</span>" }
            ],
            // Level 6: é«˜äºŒå–®å­—
            level6: [ 
                { en: "Student", zh: "å­¸ç”Ÿ", ipa: "/Ëˆstudnt/", note: "u ç™¼ /u/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ­»-ä¸Ÿ-ç­‰t</span>" }, 
                { en: "Teacher", zh: "è€å¸«", ipa: "/ËˆtitÊƒÉ™r/", note: "ea ç™¼ /i/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ›¿-é›€çˆ¾</span>" },
                { en: "Abandon", zh: "æ”¾æ£„", ipa: "/É™ËˆbÃ¦ndÉ™n/", note: "Ban ç™¼ /bÃ¦n/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé¡-ç­-ç™»</span>" },
                { en: "Benefit", zh: "åˆ©ç›Š", ipa: "/ËˆbÉ›nÉ™fÉªt/", note: "e ç™¼ /É›/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šè²-è¨¥-fi-t</span>" },
                { en: "Capture", zh: "æ•æ‰", ipa: "/ËˆkÃ¦ptÊƒÉ™r/", note: "ture ç™¼ /tÊƒÉ™r/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå‡±p-å€çˆ¾</span>" }
            ],
            // Level 7: æ—¥å¸¸æœƒè©± (åŠ ä¸Šæ•´å¥ç©ºè€³)
            level7: [ 
                { en: "Do you need a hand?", zh: "ä½ éœ€è¦å¹«å¿™å—ï¼Ÿ", ipa: "/nid É™ hÃ¦nd/", note: "Need a é€£è®€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šåº¦ æ²¹ å°¼ ã„œ æ¼¢?</span>" },
                { en: "I'd like an oyster omelet.", zh: "æˆ‘æƒ³è¦ä¸€ä»½èšµä»”ç…ã€‚", ipa: "/É”ÉªstÉ™r ËˆÉ‘mlÉ™t/", note: "Oyster (èšµä»”)ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ„›d è³´k å®‰ æ­ä¼Šæ–¯ç‰¹ é˜¿éº¼å‹’t</span>" },
                { en: "How do I get to the station?", zh: "è«‹å•è»Šç«™æ€éº¼èµ°ï¼Ÿ", ipa: "/haÊŠ du aÉª gÉ›t tu/", note: "èªèª¿åœ¨ station ä¸‹é™ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šè±ª åº¦ æ„› è“‹t å…” å¾· æ–¯stay-ç‚«?</span>" },
                { en: "Go straight and turn right.", zh: "ç›´èµ°ç„¶å¾Œå³è½‰ã€‚", ipa: "/goÊŠ streÉªt Ã¦nd tÉœrn raÉªt/", note: "Straight (ç›´èµ°)ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šè³¼ æ–¯å¢œt æŒ‰ é¨° ç‘t</span>" },
                { en: "Where is the restroom?", zh: "è«‹å•æ´—æ‰‹é–“åœ¨å“ªè£¡ï¼Ÿ", ipa: "/wÉ›r Éªz Ã°É™ ËˆrÉ›strum/", note: "Restroom æ˜¯å»æ‰€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¨çˆ¾ ä¾z å¾· ç‘æ–¯ç‰¹-room?</span>" },
                { en: "How much is this?", zh: "è«‹å•é€™å€‹å¤šå°‘éŒ¢ï¼Ÿ", ipa: "/haÊŠ mÊŒtÊƒ Éªz Ã°Éªs/", note: "Is this é€£è®€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šè±ª ç½µå€ ä¾z è¿ªæ–¯?</span>" },
                { en: "Could I get the check, please?", zh: "éº»ç…©è²·å–®ã€‚", ipa: "/kÊŠd aÉª gÉ›t Ã°É™ tÊƒÉ›k/", note: "Check æ˜¯å¸³å–®ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šåº«d æ„› è“‹t å¾· å»k, æ™®åŠ›z?</span>" },
                { en: "Long time no see.", zh: "å¥½ä¹…ä¸è¦‹ã€‚", ipa: "/lÉ”Å‹ taÉªm noÊŠ si/", note: "å£èªå¸¸ç”¨å¥ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé¾ æ³°m è«¾ C</span>" },
                { en: "I'm just looking, thanks.", zh: "æˆ‘åªæ˜¯çœ‹çœ‹ï¼Œè¬è¬ã€‚", ipa: "/aÉªm dÊ’ÊŒst ËˆlÊŠkÉªÅ‹/", note: "é€›è¡—æ™‚ç”¨ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ„›m è³ˆæ–¯ç‰¹ ç›§king, æ•£ks</span>" },
                { en: "What's up?", zh: "æœ€è¿‘å¥½å—ï¼Ÿ", ipa: "/wÊŒts ÊŒp/", note: "éæ­£å¼å•å€™ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šç“¦ts é˜¿p?</span>" },
                { en: "It's on the house.", zh: "é€™é “ç”±åº—å®¶è«‹å®¢ã€‚", ipa: "/Éªts É‘n Ã°É™ haÊŠs/", note: "House æŒ‡åº—å®¶ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šä¾ts æ˜‚ å¾· è±ªHs</span>" },
                { en: "Keep the change.", zh: "ä¸ç”¨æ‰¾é›¶äº†ã€‚", ipa: "/kip Ã°É™ tÊƒeÉªndÊ’/", note: "Change æŒ‡é›¶éŒ¢ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šKip å¾· åœˆ-å±…</span>" },
                { en: "I'll pick you up later.", zh: "æˆ‘æ™šé»å»æ¥ä½ ã€‚", ipa: "/pÉªk ju ÊŒp/", note: "Pick up æ¥é€ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ„›l çš®k æ²¹ é˜¿p é›·ç‰¹</span>" },
                { en: "Let's call it a day.", zh: "ä»Šå¤©å°±åˆ°æ­¤ç‚ºæ­¢å§ã€‚", ipa: "/kÉ”l Éªt É™ deÉª/", note: "æ”¶å·¥æ™‚å¸¸ç”¨ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šåˆ—ts å¯‡ ä¾t ã„œ çˆ¹</span>" },
                { en: "Can you say that again?", zh: "èƒ½è«‹ä½ å†èªªä¸€æ¬¡å—ï¼Ÿ", ipa: "/seÉª Ã°Ã¦t É™ËˆgÉ›n/", note: "æ²’è½æ¸…æ¥šæ™‚ç”¨ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šè‚¯ æ²¹ ã„™ã„Ÿ æˆ´t ã„œ-äº˜?</span>" },
                { en: "I'm heading out.", zh: "æˆ‘è¦å‡ºé–€äº†ã€‚", ipa: "/hÉ›dÉªÅ‹ aÊŠt/", note: "Head out å‡ºç™¼ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ„›m é»‘å®š å¥§t</span>" },
                { en: "Do you have any recommendations?", zh: "ä½ æœ‰ä»€éº¼æ¨è–¦çš„å—ï¼Ÿ", ipa: "/ËŒrÉ›kÉ™mÉ›nËˆdeÉªÊƒÉ™nz/", note: "é»é¤æ™‚ç”¨ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šåº¦ æ²¹ å“ˆv æ©å°¼ ç‘å¯é–€-çˆ¹-ç‚«s?</span>" },
                { en: "It doesn't matter.", zh: "æ²’é—œä¿‚ã€‚", ipa: "/dÊŒznt ËˆmÃ¦tÉ™r/", note: "è¡¨ç¤ºä¸åœ¨æ„ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šä¾t é”éœ‡t éº¥ç‰¹</span>" },
                { en: "Are you free tonight?", zh: "ä½ ä»Šæ™šæœ‰ç©ºå—ï¼Ÿ", ipa: "/É‘r ju fri/", note: "ç´„äººæ™‚ç”¨ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé˜¿ æ²¹ fri åœŸ-å¥ˆt?</span>" },
                { en: "See you later.", zh: "å¾…æœƒè¦‹ã€‚", ipa: "/si ju ËˆleÉªtÉ™r/", note: "é“åˆ¥å¸¸ç”¨ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šC æ²¹ é›·ç‰¹</span>" }
            ],
            // Level 8: æ–‡æ³•å‹•è©
            level8: [ 
                { en: "Go", zh: "å»", ipa: "/goÊŠ/", note: "o ç™¼ /oÊŠ/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šè³¼</span>" }, 
                { en: "Do", zh: "åš", ipa: "/du/", note: "o ç™¼ /u/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šåº¦</span>" },
                { en: "Eat", zh: "åƒ", ipa: "/it/", note: "ea ç™¼ /i/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šç•°t</span>" },
                { en: "Saw", zh: "çœ‹(éå»)", ipa: "/sÉ”/", note: "aw ç™¼ /É”/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šç´¢</span>" },
                { en: "Buy", zh: "è²·", ipa: "/baÉª/", note: "uy ç™¼ /aÉª/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ‹œ</span>" }
            ],
            // Level 9: é«˜ä¸‰ç²¾é€²
            level9: [ 
                { en: "Time", zh: "æ™‚é–“", ipa: "/taÉªm/", note: "i ç™¼ /aÉª/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šæ³°m</span>" }, 
                { en: "Way", zh: "è·¯", ipa: "/weÉª/", note: "ay ç™¼ /eÉª/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¨</span>" },
                { en: "Dilemma", zh: "é€²é€€å…©é›£", ipa: "/dÉªËˆlÉ›mÉ™/", note: "lem ç™¼ /lÉ›m/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šåº•-é›·-é¦¬</span>" },
                { en: "Metaphor", zh: "éš±å–»", ipa: "/ËˆmÉ›tÉ™fÉ”r/", note: "ph ç™¼ /f/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¦¹-å¡”-ä½›</span>" }
            ],
            // Level 10: å­¸æ¸¬/å¤šç›Š
            level10: [
                { en: "Acquire", zh: "ç²å¾—/ç¿’å¾—", ipa: "/É™ËˆkwaÉªÉ™r/", note: "A ç™¼ /É™/ï¼›i ç™¼ /aÉª/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé¡-å¿«-çˆ¾</span>" },
                { en: "Comprehensive", zh: "ç¶œåˆçš„", ipa: "/ËŒkÉ‘mprÉªËˆhÉ›nsÉªv/", note: "pre ç™¼ /prÉª/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šåº·-æ™®ç‘-äº¨-è¥¿v</span>" },
                { en: "Distinguish", zh: "å€åˆ¥", ipa: "/dÉªËˆstÉªÅ‹gwÉªÊƒ/", note: "gu ç™¼ /gw/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šè¿ª-æ–¯å®-è²´å™“</span>" },
                { en: "Appreciate", zh: "æ„Ÿæ¿€", ipa: "/É™ËˆpriÊƒiËŒeÉªt/", note: "pre ç™¼ /pri/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé¡-æ™®ç‘-å–œ-A-t</span>" },
                { en: "Potential", zh: "æ½›åŠ›", ipa: "/pÉ™ËˆtÉ›nÊƒÉ™l/", note: "ti ç™¼ /Êƒ/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šé —-å¤©-ä¿®</span>" },
                { en: "Negotiate", zh: "è«‡åˆ¤", ipa: "/nÉªËˆgoÊŠÊƒiËŒeÉªt/", note: "ti ç™¼ /Êƒi/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå‘¢-è³¼-å–œ-A-t</span>" },
                { en: "Efficient", zh: "æœ‰æ•ˆç‡çš„", ipa: "/ÉªËˆfÉªÊƒnt/", note: "ci ç™¼ /Êƒ/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šä¾-é-ç‚«t</span>" },
                { en: "Domestic", zh: "åœ‹å…§çš„", ipa: "/dÉ™ËˆmÉ›stÉªk/", note: "mes ç™¼ /mÉ›s/ã€‚<br><span class='text-indigo-600 font-bold'>éŸ³ä¼¼ï¼šå¾—-å¦¹-æ–¯-è¸¢k</span>" }
            ]
        };

        // æ“´å……å¾Œçš„è³‡æ–™å®¹å™¨
        let WORD_DATA = {};

        // è¨­å®šæ¯å±€é¡Œæ•¸
        const QUESTIONS_PER_ROUND = 20;
        const TARGET_WORD_COUNT = 600;

        // --- è‡ªå‹•æ“´å……è³‡æ–™åº«å‡½å¼ ---
        function expandDataTo600() {
            // æ·±æ‹·è²åŸå§‹è³‡æ–™
            WORD_DATA = JSON.parse(JSON.stringify(RAW_WORD_DATA));

            for (const level in WORD_DATA) {
                // ç¬¬ä¸€é—œä¿æŒåŸæ¨£ï¼Œä¸æ“´å……
                if (level === 'level1') continue;

                const originalWords = WORD_DATA[level];
                const currentCount = originalWords.length;
                
                // å¦‚æœéœ€è¦æ“´å……
                if (currentCount < TARGET_WORD_COUNT) {
                    const needed = TARGET_WORD_COUNT - currentCount;
                    
                    for (let i = 0; i < needed; i++) {
                        const sourceWord = originalWords[i % currentCount];
                        
                        WORD_DATA[level].push({
                            en: sourceWord.en, 
                            zh: sourceWord.zh,
                            ipa: sourceWord.ipa,
                            note: sourceWord.note
                        });
                    }
                }
                
                // æ´—ç‰Œ
                WORD_DATA[level].sort(() => 0.5 - Math.random());
            }
            console.log("è³‡æ–™åº«æ“´å……å®Œæˆï¼šé™¤ Level 1 å¤–ï¼Œæ¯é—œçš†ç‚º 600 å­—");
        }

        const LEVELS = [
            { id: 'level1', title: '1. æ¯éŸ³åŸºç¤', desc: 'ç´”æ¯éŸ³ (A, E, I, O, U) ç™¼éŸ³å˜´å‹', color: 'bg-yellow-400' },
            { id: 'level2', title: '2. è¤‡åˆå­éŸ³', desc: 'Digraphs (CH/SH) & Blends (BL/STR)', color: 'bg-orange-400' },
            { id: 'level3', title: '3. åœ‹å°å–®å­—', desc: 'åŸºç¤å­—å½™èˆ‡çŸ­æ¯éŸ³', color: 'bg-green-400' },
            { id: 'level4', title: '4. åœ‹ä¸­å–®å­—', desc: 'é€²éšé–±è®€å­—å½™', color: 'bg-teal-400' },
            { id: 'level5', title: '5. é«˜ä¸€æ ¸å¿ƒ', desc: 'å­¸è¡“å…¥é–€å­—å½™', color: 'bg-blue-400' },
            { id: 'level6', title: '6. é«˜äºŒé€²éš', desc: 'æ·±åº¦é–±è®€å­—å½™', color: 'bg-indigo-400' },
            { id: 'level7', title: '7. æ—¥å¸¸æœƒè©±', desc: '600å¥é“åœ°ç”Ÿæ´»çŸ­å¥', color: 'bg-purple-400' },
            { id: 'level8', title: '8. æ–‡æ³•å‹•è©', desc: 'å‹•è©è®ŠåŒ–èˆ‡æ–‡æ³•', color: 'bg-pink-400' },
            { id: 'level9', title: '9. é«˜ä¸‰ç²¾é€²', desc: 'å­¸è¡“èˆ‡æŠ½è±¡æ¦‚å¿µ', color: 'bg-rose-400' },
            { id: 'level10', title: '10. å­¸æ¸¬/å¤šç›Š', desc: 'é«˜é »è€ƒè©¦å¿…å‚™å–®å­—', color: 'bg-stone-500' }
        ];

        // ==========================================
        //  æ‡‰ç”¨ç¨‹å¼é‚è¼¯
        // ==========================================

        let state = {
            view: 'home',
            currentLevelId: '',
            questions: [],
            currentIndex: 0,
            score: 0,
            status: 'idle', // idle, listening, evaluating, success, fail
            transcript: '', 
            feedbackMsg: '',
            
            // ç³»çµ±æ”¯æ´åº¦
            isSecure: window.location.protocol === 'https:' || window.location.hostname === 'localhost',
            speechSupported: false,
            ttsSupported: false,
            showHelpModal: false
        };

        // --- TTS (ç™¼éŸ³) ---
        function initTTS() {
            if ('speechSynthesis' in window) {
                state.ttsSupported = true;
                window.speechSynthesis.getVoices();
            }
        }

        function speak(text) {
            if (!state.ttsSupported) return;
            window.speechSynthesis.cancel();
            
            let textToSpeak = text.replace(/\s*\(\d+\)/, "");
            
            const u = new SpeechSynthesisUtterance(textToSpeak);
            u.lang = 'en-US';
            u.rate = 0.8; 
            
            const voices = window.speechSynthesis.getVoices();
            const enVoice = voices.find(v => v.lang === 'en-US' && v.name.includes('Google')) || 
                            voices.find(v => v.lang === 'en-US');
            if(enVoice) u.voice = enVoice;
            
            window.speechSynthesis.speak(u);
        }

        // --- STT (èªéŸ³è¾¨è­˜) ---
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition = null;

        function initSTT() {
            if (SpeechRecognition) {
                state.speechSupported = true;
                recognition = new SpeechRecognition();
                recognition.lang = 'en-US';
                recognition.continuous = false;
                recognition.interimResults = false;

                recognition.onstart = () => {
                    state.status = 'listening';
                    state.transcript = '';
                    state.feedbackMsg = 'è«‹ç™¼éŸ³...';
                    render();
                };

                recognition.onresult = (event) => {
                    const result = event.results[0][0].transcript;
                    state.transcript = result;
                    evaluate(result);
                };

                recognition.onerror = (e) => {
                    console.log('Error', e);
                    state.status = 'fail';
                    if (e.error === 'not-allowed') {
                        state.feedbackMsg = 'æ¬Šé™è¢«æ‹’';
                        state.showHelpModal = true;
                    } else if (e.error === 'no-speech') {
                        state.feedbackMsg = 'æ²’è½åˆ°è²éŸ³';
                    } else {
                        state.feedbackMsg = 'è¾¨è­˜éŒ¯èª¤';
                    }
                    render();
                };

                recognition.onend = () => {
                    if (state.status === 'listening') {
                        state.status = 'idle';
                        render();
                    }
                };
            }
        }

        function startRecording() {
            if (!state.speechSupported) {
                alert("ç€è¦½å™¨ä¸æ”¯æ´éŒ„éŸ³");
                return;
            }
            try {
                recognition.start();
            } catch(e) {
                console.error(e);
            }
        }

        // --- æ ¸å¿ƒï¼šç™¼éŸ³æ¯”å° ---
        function evaluate(userSay) {
            const currentQ = state.questions[state.currentIndex];
            const target = currentQ.en.replace(/\s*\(\d+\)/, "").toLowerCase().trim();
            // å¥å­æ¯”å°ï¼šç§»é™¤æ¨™é»ç¬¦è™Ÿ
            const cleanUserSay = userSay.toLowerCase().replace(/[^a-z0-9 ]/g, "").trim();
            const cleanTarget = target.replace(/[^a-z0-9 ]/g, "");

            let isCorrect = cleanUserSay === cleanTarget || cleanUserSay.includes(cleanTarget);
            
            // Level 1 éŸ³æ¨™æ¯”å°å¯¬å®¹åº¦
            if (state.currentLevelId === 'level1') {
                if (cleanUserSay.length > 0) isCorrect = true;
            }
            else if (state.currentLevelId === 'level2') {
                if (cleanUserSay.includes(cleanTarget)) isCorrect = true;
            }

            if (isCorrect) {
                state.status = 'success';
                state.score += 5; 
                state.feedbackMsg = `Correct!`;
                speak("Good! " + target);
                render();
                setTimeout(nextQuestion, 2000);
            } else {
                state.status = 'fail';
                state.feedbackMsg = `è½åˆ°: "${userSay}"`;
                speak("Try again. " + target);
                render();
            }
        }

        function startGame(levelId) {
            const allWords = WORD_DATA[levelId];
            
            if (levelId === 'level1') {
                state.questions = [...allWords];
            } else {
                state.questions = [...allWords].sort(() => 0.5 - Math.random()).slice(0, QUESTIONS_PER_ROUND);
            }
            
            state.currentLevelId = levelId;
            state.currentIndex = 0;
            state.score = 0;
            state.view = 'game';
            state.status = 'idle';
            state.transcript = '';
            state.feedbackMsg = '';

            render();
            setTimeout(() => speak(state.questions[0].en), 600);
        }

        function nextQuestion() {
            if (state.currentIndex < state.questions.length - 1) {
                state.currentIndex++;
                state.status = 'idle';
                state.transcript = '';
                state.feedbackMsg = '';
                render();
                speak(state.questions[state.currentIndex].en);
            } else {
                state.view = 'result';
                render();
                speak("Mission Complete!");
            }
        }

        function goHome() {
            state.view = 'home';
            render();
        }

        function toggleHelp(show) {
            state.showHelpModal = show;
            render();
        }

        function highlightVowels(word) {
            const displayWord = word.replace(/\s*\(\d+\)/, "");
            if (displayWord.startsWith('[') && displayWord.endsWith(']')) return displayWord;
            return displayWord.replace(/([aeiouAEIOU])/g, '<span class="text-rose-500">$1</span>');
        }

        function render() {
            const app = document.getElementById('app');
            let html = '';

            let secureWarning = '';
            if (!state.isSecure && state.view === 'home') {
                secureWarning = `<div class="bg-amber-100 text-amber-800 px-4 py-2 text-xs text-center border-b border-amber-200">âš ï¸ ç¶²å€é HTTPSï¼Œéº¥å…‹é¢¨å¯èƒ½æœƒå¤±æ•ˆ</div>`;
            }

            // Modal
            let helpModalHtml = '';
            if (state.showHelpModal) {
                helpModalHtml = `
                    <div class="absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 fade-in">
                        <div class="bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl relative">
                            <button onclick="toggleHelp(false)" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600">
                                <i data-lucide="x-circle" class="w-8 h-8"></i>
                            </button>
                            <div class="text-center">
                                <div class="w-12 h-12 bg-red-100 text-red-500 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <i data-lucide="mic-off" class="w-6 h-6"></i>
                                </div>
                                <h3 class="text-xl font-bold text-slate-800 mb-4">éº¥å…‹é¢¨æ¬Šé™è¢«æ‹’çµ•ï¼Ÿ</h3>
                                <div class="text-left text-sm text-slate-600 space-y-4 bg-slate-50 p-4 rounded-xl">
                                    <p class="font-bold">å¦‚ä½•é–‹å•Ÿæ¬Šé™ (Chrome)ï¼š</p>
                                    <ol class="list-decimal list-inside space-y-2">
                                        <li>é»æ“Šç¶²å€åˆ—å·¦é‚Šçš„ <i data-lucide="lock" class="w-4 h-4 inline text-green-600"></i> <strong>é–é ­ç¬¦è™Ÿ</strong>ã€‚</li>
                                        <li>é»é¸ã€Œæ¬Šé™ã€æˆ–ã€Œç¶²ç«™è¨­å®šã€ã€‚</li>
                                        <li>æ‰¾åˆ°ã€Œéº¥å…‹é¢¨ã€ä¸¦é¸æ“‡ <strong>å…è¨± (Allow)</strong>ã€‚</li>
                                        <li>é‡æ–°æ•´ç†ç¶²é ã€‚</li>
                                    </ol>
                                    <p class="text-xs text-slate-400 mt-2">* iPhone è«‹æª¢æŸ¥æ‰‹æ©Ÿè¨­å®š > Safari > éº¥å…‹é¢¨ã€‚</p>
                                </div>
                                <button onclick="toggleHelp(false)" class="mt-6 w-full bg-indigo-600 text-white py-3 rounded-xl font-bold">
                                    æˆ‘æ‡‚äº†
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }

            if (state.view === 'home') {
                const getCount = (id) => id === 'level1' ? WORD_DATA[id].length : WORD_DATA[id].length;

                html = `
                    ${secureWarning}
                    <div class="w-full p-6 pb-20 fade-in">
                        <header class="mb-6 text-center">
                            <h1 class="text-3xl font-black text-indigo-600 mb-1">English Master</h1>
                            <p class="text-sm text-slate-500">KK éŸ³æ¨™ãƒ»ç™¼éŸ³æ•™ç·´</p>
                            ${!state.speechSupported ? '<div class="mt-2 bg-red-100 text-red-600 px-3 py-1 rounded text-xs inline-block">âš ï¸ ç€è¦½å™¨ä¸æ”¯æ´éŒ„éŸ³</div>' : ''}
                        </header>
                        
                        <div class="flex justify-center mb-6">
                            <button onclick="toggleHelp(true)" class="flex items-center gap-2 bg-white border border-slate-200 text-slate-500 px-4 py-2 rounded-full text-sm shadow-sm hover:bg-slate-50">
                                <i data-lucide="settings-2" class="w-4 h-4"></i> éº¥å…‹é¢¨è¨­å®šæ•™å­¸
                            </button>
                        </div>

                        <div class="grid gap-4">
                            ${LEVELS.map(lvl => `
                                <button onclick="startGame('${lvl.id}')" class="relative overflow-hidden rounded-2xl shadow-md transition-transform active:scale-95 text-left bg-white border border-slate-100">
                                    <div class="${lvl.color} p-4 text-white">
                                        <div class="font-bold text-lg">${lvl.title}</div>
                                        <div class="text-xs opacity-90">${lvl.desc}</div>
                                    </div>
                                    <div class="p-3 flex justify-between items-center text-slate-500 text-sm">
                                        <span>é–‹å§‹ (æŠ½ ${lvl.id === 'level1' ? WORD_DATA['level1'].length : QUESTIONS_PER_ROUND} é¡Œ / åº«å­˜ ${getCount(lvl.id)})</span>
                                        <i data-lucide="mic" class="w-5 h-5"></i>
                                    </div>
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            } else if (state.view === 'game') {
                const q = state.questions[state.currentIndex];
                const isListening = state.status === 'listening';
                const isSuccess = state.status === 'success';
                const isFail = state.status === 'fail';

                let cardClass = "border-indigo-100 shadow-lg";
                let statusIcon = "";
                
                if (isListening) {
                    cardClass = "border-rose-400 shadow-rose-200 shadow-xl ring-4 ring-rose-50";
                } else if (isSuccess) {
                    cardClass = "border-green-400 bg-green-50 shadow-green-200 correct-anim";
                    statusIcon = `<div class="absolute -top-6 right-0 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg flex items-center gap-1"><i data-lucide="check"></i> Correct</div>`;
                } else if (isFail) {
                    cardClass = "border-red-300 bg-red-50";
                    statusIcon = `<div class="absolute -top-6 right-0 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg flex items-center gap-1"><i data-lucide="x"></i> Try Again</div>`;
                }

                // å‹•æ…‹èª¿æ•´å­—é«”å¤§å°ï¼šé‡å°å¥å­é•·åº¦å„ªåŒ–
                let textSizeClass = 'text-5xl'; // é è¨­å–®å­—å¤§å°
                if (q.en.length > 40) textSizeClass = 'text-lg';      // è¶…é•·å¥
                else if (q.en.length > 25) textSizeClass = 'text-xl'; // é•·å¥
                else if (q.en.length > 15) textSizeClass = 'text-2xl'; // ä¸­å¥
                else if (q.en.length > 8) textSizeClass = 'text-4xl';  // é•·å–®å­—/çŸ­å¥

                html = `
                    <div class="w-full h-full flex flex-col p-6 fade-in relative">
                        <div class="flex justify-between items-center mb-4">
                            <button onclick="goHome()" class="p-2 rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200">
                                <i data-lucide="arrow-left"></i>
                            </button>
                            <div class="font-bold text-slate-400">
                                ç¬¬ ${state.currentIndex + 1} / ${state.questions.length} é¡Œ
                            </div>
                            <div class="bg-yellow-100 text-yellow-600 px-3 py-1 rounded-full font-bold text-sm">
                                ${state.score} åˆ†
                            </div>
                        </div>

                        <div class="relative bg-white rounded-3xl p-6 mb-6 border-2 transition-all duration-300 ${cardClass} flex flex-col items-center justify-center min-h-[300px]">
                            ${statusIcon}
                            
                            <div class="${textSizeClass} font-black text-slate-800 mb-2 text-center tracking-tight break-words leading-tight">
                                ${highlightVowels(q.en)}
                            </div>
                            
                            <div class="text-indigo-400 font-mono text-xl mb-2 font-bold bg-indigo-50 px-3 py-1 rounded-lg">
                                ${q.ipa || ''}
                            </div>

                            <div class="text-lg text-slate-400 font-medium mb-6">
                                ${q.zh}
                            </div>

                            <div class="bg-yellow-50 border border-yellow-100 p-4 rounded-xl text-sm text-yellow-800 w-full text-left leading-relaxed mb-4 shadow-sm">
                                <div class="font-bold text-yellow-600 mb-1 flex items-center gap-1">
                                    <i data-lucide="lightbulb" class="w-4 h-4"></i> ç™¼éŸ³æŠ€å·§ï¼š
                                </div>
                                ${q.note || 'è«‹åƒè€ƒéŸ³æ¨™ç™¼éŸ³'}
                            </div>

                            <div class="h-6 text-center w-full">
                                ${isListening ? `
                                    <div class="mic-wave flex justify-center items-center h-full text-rose-500 font-bold gap-1">
                                        <span></span><span></span><span></span> è†è½ä¸­...
                                    </div>
                                ` : ''}
                                ${!isListening && state.transcript ? `
                                    <div class="text-sm font-bold ${isSuccess ? 'text-green-600' : 'text-red-500'}">
                                        ${state.feedbackMsg}
                                    </div>
                                ` : ''}
                                ${!isListening && !state.transcript ? `
                                    <div class="text-xs text-slate-300">é»æ“Šéº¥å…‹é¢¨ç·´ç¿’</div>
                                ` : ''}
                            </div>
                        </div>

                        <div class="flex items-center justify-center gap-8 mb-6 relative z-10">
                            <button onclick="speak('${q.en}')" class="w-16 h-16 rounded-full bg-slate-100 text-slate-600 flex items-center justify-center active:bg-slate-200 transition-colors shadow-sm">
                                <i data-lucide="volume-2" class="w-7 h-7"></i>
                            </button>

                            <button onclick="startRecording()" class="w-24 h-24 rounded-full flex items-center justify-center transition-transform active:scale-95 relative group">
                                ${isListening ? `<div class="absolute inset-0 bg-rose-500 rounded-full pulse-ring opacity-50"></div>` : ''}
                                <div class="relative w-full h-full rounded-full flex items-center justify-center shadow-2xl border-4 border-white
                                    ${isListening ? 'bg-gradient-to-br from-rose-500 to-red-600' : 'bg-gradient-to-br from-indigo-500 to-blue-600'}">
                                    <i data-lucide="mic" class="w-10 h-10 text-white"></i>
                                </div>
                            </button>
                        </div>
                        
                        <div class="text-center">
                            <button onclick="nextQuestion()" class="text-slate-400 text-sm py-2 px-4 rounded-full hover:bg-slate-50 transition-colors inline-flex items-center gap-1">
                                è·³é / ä¸‹ä¸€é¡Œ <i data-lucide="skip-forward" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                `;
            } else if (state.view === 'result') {
                html = `
                    <div class="w-full h-full flex flex-col items-center justify-center p-8 fade-in text-center">
                        <div class="text-8xl mb-6 animate-bounce">ğŸ†</div>
                        <h2 class="text-3xl font-black text-slate-800 mb-2">æ¸¬é©—å®Œæˆï¼</h2>
                        <div class="bg-white border-2 border-slate-100 w-full rounded-2xl p-8 mb-8 shadow-sm">
                            <div class="text-slate-400 text-sm mb-2">æœ€çµ‚å¾—åˆ†</div>
                            <div class="text-7xl font-black text-indigo-500">${state.score}</div>
                        </div>
                        <button onclick="startGame('${state.currentLevelId}')" class="w-full bg-indigo-600 text-white py-4 rounded-xl font-bold shadow-lg shadow-indigo-200 active:scale-95 transition-all mb-4">
                            å†ç©ä¸€æ¬¡
                        </button>
                        <button onclick="goHome()" class="w-full bg-slate-100 text-slate-500 py-4 rounded-xl font-bold active:scale-95 transition-all">
                            å›åˆ°é¸å–®
                        </button>
                    </div>
                `;
            }

            html += helpModalHtml;

            app.innerHTML = html;
            lucide.createIcons();
            window.state = state;
        }

        // åˆå§‹åŒ–
        expandDataTo600();
        initTTS();
        initSTT();
        render();

    </script>
</body>
</html>